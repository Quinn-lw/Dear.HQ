# TaskList

## Week20191118-20191122

### Day20191118

1. WMS85库下线报错导致的作业调整

   WMS总单预报去除老系统保留新系统

   停掉WMS老系统数据同步任务

   停掉老系统库存统计

2. 周末FB4应收预警规则调整

   调整预警的账单明细为当前365天

3. 结算业务信息明细表调整

   各个父依赖表的检查调整，主要四张表(3错*2+1明细)。调整：1.父依赖once表的调整输出节点+once 2.父依赖once表的找到对应merge脚本调整输出节点和输出表 3.明细调整的按标准修改文件名

   维表使用的调整：XMS、WMS使用的组织机构为助记码而不是org_code，并且新老系统的取值规则调整为新系统优先

4. 日常作业的调整

   无刃驾驶舱作业的出错定位(网络连接问题)

   海兰新系统仓库信息的数据提供

   executeJob_new脚本出错提示优化：1.增加对不存在作业的提示 2.优化作业出错时的显示，对用户更友好

**[TODO]** 

1. 计费单量分析 by业务系统、月份 [S]
2. 计费单量分析 每月TOP10客户  [S]

### Day20191119

1. WMS库下线导致报错的作业调整

   每日渠道汇总 停止

   周渠道汇总 停止

   WMS入库统计 停止

   OMS SKU数据 停止

   TR DO数据 停止

   WMS 库存数据 停止

   截至当前待发货订单信息

2. maxCompute同步作业检查

   fpxods.s_xms_bil_bil_business:表为空

   上周XMS作业出错天文冻结了xms_bil_business的imp脚本导致下面依赖它的无法启动，由天文解决

3. 调整调度脚本到executeJob_new

   以前的报错是通过错误时kettle中邮件控件发预警实现的，最终整个作业对外的返回状态会是0，本次调整为用executeJob_new代替executeJob，去除出错发送邮件控件，出错时整个作业对外会返回错误的状态码，继而捕捉到错误日志

   本次调整：

   /export/everyday_06

   /export/everyday_08

   /export/everyday_10

   /export/it_service/every_month_01

   /export/it_service/every_m040320

4. 订单业务明细的增量脚本，预计耗时8~16H

5. 其它临时作业

   GFN财务收入核对服务商账单时需要我协助匹配七十多万的服务商单号收入信息，提出人张青青

### Day20191120

上午嫦娥进度例会

用executeJob_new代替executeJob 已实现全部作业的调整

**[TODO]**

1. 嫦娥收入部分的设计文档

2. 嫦娥收入部分的开发文档[包含数据字典、物理实现]

3. 嫦娥明细增量作业的实现

   1. 结算业务信息明细层 [R]
   2. 结算费用项信息明细层
   3. 账单时间的结算订单明细层
   4. 账单口径的成本收入匹配订单粒度的明细层

4. 和CSS开发确认账单业务信息快照的事情

5. FB4应收预警调整：

   应用层由maxCompute调整为RDS，直连maxCompute会经常性报错

   增加未计费原因

### Day20191121

1. EBay数据服务商名称陈旧问题定位

2. EBay数据新增渠道代码和产品代码

   提供修订后的上月eBay数据

   提供修订后的上周eBay数据

3. 黄华FB4海外仓加收和全部费用项收入数据

4. 收入各层的调整

   加时间限制：2018~Now

   调整关联条件：增加系统版本标识

   调整关联：去除可优化关联

### Day20191122

